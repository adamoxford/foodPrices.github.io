<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>CPI Scrollytelling</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            background-color: #f0f0f0; /* Light grey page background */
            color: #333;
        }

        /* The main container for the scrolly experience */
        #scrolly {
            position: relative;
        }

        /* The scrolling text content */
        #scrolly > article {
            position: relative; /* Must be relative to scroll over the sticky figure */
            z-index: 10;      /* Sits on top of the chart */
        }

        /* The sticky chart container */
        #scrolly > figure {
            position: sticky; /* This is the magic! */
            top: 15vh;        /* Stick 15% from the top */
            height: 70vh;     /* Chart takes up 70% of the viewport height */
            width: 100%;
            margin: 0;
            z-index: 1;       /* Sits behind the text */
        }

        /* The chart div itself */
        #vis {
            width: 100%;
            height: 100%;
            margin: 0 auto; /* Center the chart container */
            background-color: white; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        /* The trigger area for each caption */
        .step {
            min-height: 100vh; /* "One vertical width apart" */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Vertically center the caption */
        }

        /* The 'floating' caption box */
        .step p {
            max-width: 40%;   /* Narrower width */
            margin-left: 40%;   /* Pushed off-center to the right */
            margin-right: auto;
            
            background-color: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        /* --- THIS IS THE NEW RESPONSIVE BLOCK --- */
        @media (max-width: 600px) {
          /* On mobile screens (600px wide or less),
            these styles will override the ones above.
          */
          
          /* Make the chart taller and move it up */
          #scrolly > figure {
            top: 10vh;      /* Stick closer to the top */
            height: 80vh;  /* Make it taller (80% of viewport) */
          }

          /* Center text, make it larger and wider */
          .step p {
            max-width: 90%;   /* Use more of the screen */
            margin-left: auto;  /* Center the block */
            margin-right: auto;
            font-size: 2rem; /* Slightly larger text */
          }
        }
        /* --- END OF NEW BLOCK --- */
        
    </style>
    <script src="https://cdn.jsdelivr.net/npm/d3@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
    <section id="scrolly">
        
        <figure>
            <div id="vis"></div>
        </figure>

        <article>
            <div class="step" data-step="0">
                <p>The cost of food has been rising faster than the <strong>All Items</strong> measure of Consumer Price Inflation (CPI) for almost the whole of the last five years.</p>
                <p>Using data from StatsSA's <strong><a href="https://www.statssa.gov.za/?cat=33">Consumer Price Index (CPI)</a></strong> and <strong><a hred="https://www.bfap.co.za/">BFAP's Food Inflation Briefs</a></strong> we've put together this recap of the underlying causes.</p>  
            </div>
            <div class="step" data-step="1">
                <p><strong>2021: Pandemic pressures and weather challenges</strong>
                </br>In December 2021, food price inflation was at 5.93%, driven largely by <strong>meat</strong> (8.63%) and <strong>oils</strong> (20.77%). According to BFAP, poultry - a key protein source - became more expensive across most cuts.</p>
                <p>The <strong>Thrifty Healthy Food Basket</strong>, BFAP’s measure of the cost of a balanced diet for a family of four, also rose notably over the year. BFAP described this basket as “a nutritionally balanced combination of 26 food items from all food groups,” offering a more accurate reflection of costs for low-income households than the standard CPI basket.</p>
                <p>Major inflation drivers included the impact of the Omicron variant of <strong>COVID-19</strong>, heavy rainfall that threatened crop production, limited livestock supply, and surging international oilseed prices. Oils and fats remained the most significant contributors to overall food inflation.</p>
       </div>
            <div class="step" data-step="2">
                <p><strong>2022: Global shocks intensify</strong>
                </br>By April 2022, food inflation had continued to rise even faster than in the previous year, as the invasion of Ukraine drove up the cost of transport and <strong>oils and fats once again</strong> - although these would only peak in August. Products that saw particularly sharp price growth included pasta, samp, various beef cuts, pork chops, chicken portions, frozen fish, and several types of fresh produce.</p>
                <p>The <strong>Thrifty Healthy Food Basket</strong> also became more expensive, reflecting a notable increase from the previous year. BFAP linked this escalation to major global disruptions, including China’s zero-COVID policy and India’s restriction on wheat exports. Locally, outbreaks of foot-and-mouth disease and elevated feed prices limited cattle and poultry slaughter rates, which added further pressure to meat prices.</p>
            </div>
            <div class="step" data-step="3">
                <p><strong>2023: The energy and exchange rate squeeze</strong>
                </br>By March 2023, food inflation had reached its highest level, with the Thrifty Healthy Food Basket showing a substantial year-on-year increase. Basic staples such as maize meal, beef, onions, and potatoes recorded some of the most significant price hikes. <strong>Cereal products</strong> and <strong>vegetables</strong> both peaked at over 20% increases year-on-year.</p>
                <p>BFAP explained that “the <strong>weak exchange rate of the rand</strong> in the first quarter of 2023 prevented lower international grain and oilseed prices from fully reflecting in the domestic market.” Ongoing <strong>load-shedding</strong>, high fuel prices, and escalating logistics costs further added pressure throughout the value chain.</p>
                <p>Livestock and dairy producers faced additional strain due to lower milk production and reduced consumer demand. Beef exports were also disrupted by biosecurity challenges, which suppressed farmgate prices even as production costs continued to climb.</p>
            </div>
            <div class="step" data-step="4">
                <p><strong>2024: Slight relief, but grain prices still a concern</strong>
                </br>By December 2024, food inflation had eased, with the Thrifty Healthy Food Basket showing just a moderate year-on-year increase. Bread and <strong>cereals</strong> prices rose only slightly, while <strong>oils and fats</strong> actually fell in price over the year. <strong>Meat products</strong> were beginning to fall a small amount in price, though sugar and non-alcoholic beverages remained elevated.</p>
                <p>Behind the headline CPI figures, however, avocado prices surged sharply, and mutton, lamb, cabbage, bananas, dried beans, coffee, and tea also increased notably. In contrast, some items, including pasta, potatoes, onions, sunflower oil, eggs, and several meat cuts, experienced price declines.</p>
                <p>Global grain markets continued to influence domestic costs. BFAP noted that year-on-year comparisons for December reflected substantial increases in maize, with white maize showing the largest rise and yellow maize also climbing significantly.</p>
                </div>
        </article>
        
    </section>

    <script src="scrolly.js"></script>
</body>
</html>
