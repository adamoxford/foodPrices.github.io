<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>CPI Scrollytelling</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            background-color: #ffffff; /* Light grey page background */
            color: #333;
        }

        /* The main container for the scrolly experience */
        #scrolly {
            position: relative;
        }

        /* The scrolling text content */
        #scrolly > article {
            position: relative; /* Must be relative to scroll over the sticky figure */
            z-index: 10;      /* Sits on top of the chart */
        }

        /* The sticky chart container */
        #scrolly > figure {
            position: sticky; /* This is the magic! */
            top: 1vh;        /* Stick 15% from the top */
            height: 100vh;     /* Chart takes up 70% of the viewport height */
            width: 100%;
            margin: 0;
            z-index: 1;       /* Sits behind the text */
        }

        /* The chart div itself */
        #vis {
            width: 100%;
            height: 100%;
            margin: 0 auto; /* Center the chart container */
         /*   background-color: white; */
         /*   box-shadow: 0 4px 10px rgba(0,0,0,0.1); */
         /*   border-radius: 8px; */
        }

        #vis .vega-embed {
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            transition: all 0.5s ease-in-out;
        }


        /* The trigger area for each caption */
        .step {
            /* We've removed min-height, display, flex-direction, and justify-content */
            
            /* This creates the 100vh gap *after* the text block */
            margin-bottom: 100vh; 

            /* This positions the text 25% down from the top of the screen */
            padding-top: 25vh; 
        }

        .step-final {
            margin-bottom: 0;
            padding-bottom: 80vh; 
        }

        /* The 'floating' caption box */
        .step p {
            max-width: 40%;   /* Narrower width */
            margin-left: 40%;   /* Pushed off-center to the right */
            margin-right: auto;
            
            background-color: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 18;
            line-height: 1.6;
        }
        
        .step-penultimate p {
            max-width: 40%;   /* Narrower width */
            margin-left: 10%;   /* Pushed off-center to the right */
            margin-right: auto;
            
            background-color: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 18;
            line-height: 1.6;
        }
        
        .step-final p {
            max-width: 40%;   /* Narrower width */
            margin-left: 10%;   /* Pushed off-center to the right */
            margin-right: auto;
            
            background-color: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 18;
            line-height: 1.6;
        }
        
        /* --- THIS IS THE NEW RESPONSIVE BLOCK --- */
        @media (max-width: 600px) {
          /* On mobile screens (600px wide or less),
            these styles will override the ones above.
          */
          
          /* Make the chart taller and move it up */
          #scrolly > figure {
            top: 1vh;      /* Stick closer to the top */
            height: 100vh;  /* Make it taller (80% of viewport) */
          }

          /* Center text, make it larger and wider */
          .step p {
            max-width: 60%;   /* Use more of the screen */
            margin-left: auto;  
            margin-right: auto;
            font-size: 1.1rem; /* Slightly larger text */
          }
        }
        /* --- END OF NEW BLOCK --- */
        
    </style>
    <script src="https://cdn.jsdelivr.net/npm/d3@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
    <section id="scrolly">
        
        <figure>
            <div id="vis"></div>
        </figure>

        <article>
            <div class="step" data-step="0">
                <p><strong>How much does it cost to eat well?</strong>
                </br><strong>The Bureau for Food and Agricultural Policy (BFAP)</strong> monitors a basket of household goods which is calls the "Thrifty Healthy Food Basket", which it says reflects the most affordable amount to eat a healthy diet.</p>
                <p>This is separate to StatsSA's basket used to calculate food price inflation, and is designed to realistically reflect the needs and capabilities of a four-person lower-income household.</p>
            </div>
            
            <div class="step" data-step="1">
                <p><strong>The cost of a monthly shop has risen by a third in just five years</strong>
                </br>The cost of BFAP's basket has risen by a staggering amount - almost a third - in just three years. That's almost <strong>R1 000</strong> at a time when wage increases have been minimal.</p>  
            </div>
            
            <div class="step" data-step="2">
                <p>The cost of food has been rising faster than the <strong>All Items</strong> measure of Consumer Price Inflation (CPI) for almost the whole of the last five years.</p>
                <p>Using data from StatsSA's <strong><a href="https://www.statssa.gov.za/?cat=33">Consumer Price Index (CPI)</a></strong> and <strong><a hred="https://www.bfap.co.za/">BFAP's Food Inflation Briefs</a></strong> we've put together this recap of the underlying causes.</p>  
            </div>
            <div class="step" data-step="3">
                <p><strong>2021: Pandemic pressures and weather challenges</strong>
                </br>In December 2021, food price inflation was at 5.93%, driven largely by <strong>meat</strong> (8.63%) and <strong>oils</strong> (20.77%). According to BFAP, poultry - a key protein source - became more expensive across most cuts.</p>
                <p>The <strong>Thrifty Healthy Food Basket</strong>, BFAP’s measure of the cost of a balanced diet for a family of four, also rose notably over the year. BFAP described this basket as “a nutritionally balanced combination of 26 food items from all food groups,” offering a more accurate reflection of costs for low-income households than the standard CPI basket.</p>
                <p>Major inflation drivers included the impact of the Omicron variant of <strong>COVID-19</strong>, heavy rainfall that threatened crop production, limited livestock supply, and surging international oilseed prices. Oils and fats remained the most significant contributors to overall food inflation.</p>
       </div>
            <div class="step" data-step="4">
                <p><strong>2022: Global shocks intensify</strong>
                </br>By April 2022, food inflation had continued to rise even faster than in the previous year, as the invasion of Ukraine drove up the cost of transport and <strong>oils and fats once again</strong> - although these would only peak in August. Products that saw particularly sharp price growth included pasta, samp, various beef cuts, pork chops, chicken portions, frozen fish, and several types of fresh produce.</p>
                <p>The <strong>Thrifty Healthy Food Basket</strong> also became more expensive, reflecting a notable increase from the previous year. BFAP linked this escalation to major global disruptions, including China’s zero-COVID policy and India’s restriction on wheat exports. Locally, outbreaks of foot-and-mouth disease and elevated feed prices limited cattle and poultry slaughter rates, which added further pressure to meat prices.</p>
            </div>
            <div class="step" data-step="5">
                <p><strong>2023: The energy and exchange rate squeeze</strong>
                </br>By March 2023, food inflation had reached its highest level, with the Thrifty Healthy Food Basket showing a substantial year-on-year increase. Basic staples such as maize meal, beef, onions, and potatoes recorded some of the most significant price hikes. <strong>Cereal products</strong> and <strong>vegetables</strong> both peaked at over 20% increases year-on-year.</p>
                <p>BFAP explained that “the <strong>weak exchange rate of the rand</strong> in the first quarter of 2023 prevented lower international grain and oilseed prices from fully reflecting in the domestic market.” Ongoing <strong>load-shedding</strong>, high fuel prices, and escalating logistics costs further added pressure throughout the value chain.</p>
                <p>Livestock and dairy producers faced additional strain due to lower milk production and reduced consumer demand. Beef exports were also disrupted by biosecurity challenges, which suppressed farmgate prices even as production costs continued to climb.</p>
            </div>
            <div class="step step-penultimate" data-step="6">
                <p><strong>2024: Slight relief, but grain prices still a concern</strong>
                </br>By December 2024, food inflation had eased, with the Thrifty Healthy Food Basket showing just a moderate year-on-year increase. Bread and <strong>cereals</strong> prices rose only slightly, while <strong>oils and fats</strong> actually fell in price over the year. <strong>Meat products</strong> were beginning to fall a small amount in price, though sugar and non-alcoholic beverages remained elevated.</p>
                <p>Behind the headline CPI figures, however, avocado prices surged sharply, and mutton, lamb, cabbage, bananas, dried beans, coffee, and tea also increased notably. In contrast, some items, including pasta, potatoes, onions, sunflower oil, eggs, and several meat cuts, experienced price declines.</p>
                <p>Global grain markets continued to influence domestic costs. BFAP noted that year-on-year comparisons for December reflected substantial increases in maize, with white maize showing the largest rise and yellow maize also climbing significantly.</p>
                </div>
            <div class="step step-final" data-step="7">
                <p><strong>2025: Stabilising prices amid mixed inflation</strong>
                </br>By By mid-2025, foods experiencing the highest price increases included <strong>beef cuts, mutton, lamb</strong>, and <strong>fresh produce</strong> such as tomatoes, peppers, carrots, and apples. Items with moderate inflation included starches, pork, canned fish, cabbage, avocados, peanut butter, cooking oil, and yoghurt, while wheat, pasta, rice, chicken, bananas, <strong>milk, eggs</strong>, and rooibos tea saw price declines.</p>
                <p>BFAP observed that wheat prices softened amid global supply recovery, although local import dependency remained at 48%. Maize prices reflected tight global supply and regional drought conditions, with white maize trading at a premium. Soybean and sunflower prices tracked global trends, supported by a stronger rand and improved harvest prospects.</p>
                <p>Domestic meat prices diverged from global markets. Chicken prices rose slightly due to avian influenza in the Western Cape, while pork prices increased on African swine fever concerns. Beef and sheep prices began to ease from 2024 highs.</p>
                </div>    
        </article>
        
    </section>

    <script src="scrolly.js"></script>
</body>
</html>
